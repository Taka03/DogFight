//*============================================================================
//SoundEffect.cpp
//*============================================================================

//=============================================================================
//include
//=============================================================================
#include "SoundEffect.h"
#include "CommonObject.h"
#include "Common/Application.h"

//=============================================================================
//コンストラクタ
//=============================================================================
//[input]
//	pName:データ名
//=============================================================================
CSoundEffect::CSoundEffect( const char *pName ) 
:m_pSE(NULL), 
 CSoundObject( pName )
{
	Load();


}


//=============================================================================
//デストラクタ
//=============================================================================
CSoundEffect::~CSoundEffect(void)
{
	SAFE_RELEASE( m_pSE );
}

//=============================================================================
//サウンドの読み込み
//=============================================================================
bool CSoundEffect::Load( )
{
	ICore *pCore = CCommonObject::GetAppli()->GetCore();
	File::IFileManager *pFileMgr = CCommonObject::GetAppli()->GetFileMgr();
	
	pFileMgr->SetCurrentPath("SE");
	
	printf("LOAD SE[%s]", m_strFileName.c_str() );
	
	m_pSE = pCore->CreateSoundFromFile( m_strFileName.c_str(), 1, false ); 
	
	_ASSERT( m_pSE );
	
	if( m_pSE == NULL )
	{	
		return false;	
	}
	
	printf( "                 : -> %s\n", m_pSE->IsInvalid() ? "Failed" : "Succeeded" );
	
	return true;
	
}

//=============================================================================
//音の再生
//=============================================================================
void CSoundEffect::Play()
{
	m_pSE->Play(0);
}

//=============================================================================
//音の停止
//=============================================================================
void CSoundEffect::Stop()
{
	m_pSE->Stop(0);
}




